<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ===== META SHARE ===== -->
<meta property="og:title" content="BibleVerse GBT Plamongan Indah">
<meta property="og:description" content="Firman-Nya lah pelita bagi ku setiap hari">
<meta property="og:image" content="https://gbtplamonganindah.github.io/bibleverse/background.jpeg">
<meta property="og:url" content="https://gbtplamonganindah.github.io/bibleverse/">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">

<!-- ===== FAVICON ===== -->
<link rel="icon" type="image/png" href="favicon.png">
<link rel="apple-touch-icon" href="favicon.png">

<title>BibleVerse GBT Plamongan Indah</title>

<style>
body{
  font-family:Arial,sans-serif;
  text-align:center;
  padding:20px;
  min-height:100vh;
  background:url("background.jpeg") no-repeat center center fixed;
  background-size:cover;
}

img{width:130px;margin-bottom:15px}

em{
  font-style:italic;
  font-size:18px;
  display:block;
  margin-bottom:20px;
  color:#fff;
  text-shadow:0 2px 6px rgba(0,0,0,.6);
  opacity:0;
  animation:fadeText 2s ease forwards;
}

@keyframes fadeText{
  from{opacity:0;transform:translateY(6px)}
  to{opacity:1;transform:translateY(0)}
}

input{
  padding:8px;
  width:260px;
  margin:10px auto;
  font-size:16px;
}

button{
  padding:10px 18px;
  margin:6px;
  font-size:15px;
  cursor:pointer;
  border:2px solid #fff;
  border-radius:6px;
  background:transparent;
  color:#fff;
}

button:hover{background:rgba(255,255,255,.15)}

#hint{
  margin-top:14px;
  color:#fff;
  font-size:15px;
  display:none;
  opacity:.9;
}

#result{
  margin-top:20px;
  text-align:left;
  line-height:1.6;
  color:#fff;
  text-shadow:0 2px 6px rgba(0,0,0,.6);
  display:none;
}

#actions{margin-top:12px;display:none}
</style>
</head>

<body>

<img src="logo.png" id="logo">
<em>Firman-Nya lah pelita bagi ku setiap hari</em>

<input type="text" id="name" placeholder="Masukkan Nama Anda"><br>
<button id="startBtn" onclick="startProcess(event)">Ambil Ayat</button>

<div id="result"></div>

<div id="actions">
  <button onclick="copyVerse()">Salin Ayat</button>
  <button onclick="shareAsImage()">Bagikan Ayat</button>
</div>

<div id="hint">Tap Layar Untuk Memilih Ayat</div>

<canvas id="canvas" width="1080" height="1920" style="display:none"></canvas>

<script>
const verses = [
{ref:"Mazmur 23:1",text:"Tuhan adalah gembalaku, takkan kekurangan aku."},
{ref:"Yesaya 41:10",text:"Jangan takut, sebab Aku menyertai engkau."},
{ref:"Yeremia 29:11",text:"Aku mengetahui rancangan-rancangan damai sejahtera."},
{ref:"Matius 11:28",text:"Marilah kepada-Ku semua yang letih lesu."},
{ref:"Yohanes 14:27",text:"Damai sejahtera Kutinggalkan bagimu."},
{ref:"Roma 8:28",text:"Kita tahu bahwa Allah turut bekerja dalam segala sesuatu untuk mendatangkan kebaikan bagi mereka yang mengasihi Dia, yaitu bagi mereka yang terpanggil sesuai dengan rencana-Nya."},
{ref:"Filipi 4:13",text:"Segala perkara dapat kutanggung oleh Dia yang memberi kekuatan kepadaku."},
{ref:"Mazmur 46:1",text:"Allah itu tempat perlindungan dan kekuatan, sebagai penolong dalam kesesakan sangat terbukti."},
{ref:"Ibrani 13:5",text:"Aku sekali-kali tidak akan meninggalkan engkau dan tidak akan membiarkan engkau terombang-ambing."},
{ref:"Wahyu 21:4",text:"Dan Ia akan menghapus segala air mata dari mata mereka, dan maut tidak akan ada lagi; tidak akan ada lagi perkabungan, ratap tangis atau dukacita."}
];

let shuffleInterval=null;
let tapEnabled=false;
let lastText="", lastName="";

function startProcess(e){
  e.stopPropagation();
  const n=document.getElementById("name").value.trim();
  if(!n)return;

  lastName=n;
  const r=document.getElementById("result");
  r.style.display="block";

  document.getElementById("hint").style.display="block";
  document.getElementById("actions").style.display="none";
  document.getElementById("startBtn").style.display="none"; // hilangkan tombol ambil ayat
  tapEnabled=true;

  clearInterval(shuffleInterval);
  shuffleInterval=setInterval(()=>{
    const v=verses[Math.floor(Math.random()*verses.length)];
    r.innerHTML=`<strong>${v.ref}</strong><br><br>${v.text}`;
  },80);
}

document.body.addEventListener("click",()=>{
  if(!tapEnabled)return;

  tapEnabled=false;
  clearInterval(shuffleInterval);
  document.getElementById("hint").style.display="none";
  document.getElementById("actions").style.display="block";

  const v=verses[Math.floor(Math.random()*verses.length)];
  lastText=v.ref+"\n\n"+v.text;
  document.getElementById("result").innerHTML=`<strong>${v.ref}</strong><br><br>${v.text}`;
});

/* SALIN TEKS */
function copyVerse(){
  navigator.clipboard.writeText(lastText);
  alert("Ayat berhasil disalin");
}

/* BAGI GAMBAR UNTUK STORY / SHARE */
function shareAsImage(){
  const canvas=document.getElementById("canvas");
  const ctx=canvas.getContext("2d");

  const bg=new Image();
  bg.src="background.jpeg";
  const logo=document.getElementById("logo");
  const nameText=lastName;

  bg.onload=()=>{
    ctx.drawImage(bg,0,0,canvas.width,canvas.height);

    // logo di kiri atas
    const logoImg=new Image();
    logoImg.src=logo.src;
    logoImg.onload=()=>{
      ctx.drawImage(logoImg,50,50,150,150);

      // nama di kiri bawah logo
      ctx.fillStyle="#fff";
      ctx.font="36px Arial";
      ctx.textAlign="left";
      ctx.shadowColor="rgba(0,0,0,0.7)";
      ctx.shadowOffsetX=2;
      ctx.shadowOffsetY=2;
      ctx.shadowBlur=4;
      ctx.fillText(nameText,50,220);

      // ayat rata kiri di bawah nama
      ctx.font="48px Arial";
      wrapText(ctx,lastText,50,280,980,64);

      // footer
      ctx.font="italic 32px Arial";
      ctx.fillText("BibleVerse GBT Plamongan Indah",50,1800);

      canvas.toBlob((blob)=>{
        const file = new File([blob],"ayat.png",{type:"image/png"});
        if(navigator.canShare && navigator.canShare({files:[file]})){
          navigator.share({files:[file],title:"BibleVerse",text:"Ayat Firman Tuhan"});
        }else{
          const link=document.createElement("a");
          link.href=URL.createObjectURL(blob);
          link.download="ayat-firman.png";
          link.click();
        }
      });
    };
  };
}

function wrapText(ctx,text,x,y,maxWidth,lineHeight){
  const words=text.split(" ");
  let line="";
  for(let i=0;i<words.length;i++){
    const testLine=line+words[i]+" ";
    const w=ctx.measureText(testLine).width;
    if(w>maxWidth && i>0){
      ctx.fillText(line,x,y);
      line=words[i]+" ";
      y+=lineHeight;
    }else{
      line=testLine;
    }
  }
  ctx.fillText(line,x,y);
}
</script>

</body>
</html>
