<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ===== META SHARE ===== -->
<meta property="og:title" content="BibleVerse GBT Plamongan Indah">
<meta property="og:description" content="Firman-Nya lah pelita bagi ku setiap hari">
<meta property="og:image" content="https://gbtplamonganindah.github.io/bibleverse/background.jpeg">
<meta property="og:url" content="https://gbtplamonganindah.github.io/bibleverse/">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">

<link rel="icon" type="image/png" href="favicon.png">
<link rel="apple-touch-icon" href="favicon.png">

<title>BibleVerse GBT Plamongan Indah</title>

<style>
body{
  font-family:Arial,sans-serif;
  text-align:center;
  padding:20px;
  min-height:100vh;
  background:url("background.jpeg") no-repeat center center fixed;
  background-size:cover;
}

img{width:130px;margin-bottom:15px}

em{
  font-style:italic;
  font-size:18px;
  display:block;
  margin-bottom:20px;
  color:#fff;
  text-shadow:0 2px 6px rgba(0,0,0,.6);
  opacity:0;
  animation:fadeText 2s ease forwards;
}

@keyframes fadeText{
  from{opacity:0;transform:translateY(6px)}
  to{opacity:1;transform:translateY(0)}
}

/* ===== INPUT (FINAL â€“ UNDERLINE ONLY) ===== */
input{
  background:transparent;
  border:none;
  border-bottom:2px solid #fff;
  outline:none;
  color:#fff;
  width:260px;
  padding:8px 4px;
  margin:10px auto;
  font-size:16px;
  text-align:center;
}

input::placeholder{
  color:rgba(255,255,255,.7);
}
/* ===== END INPUT ===== */

button{
  padding:10px 18px;
  margin:6px;
  font-size:15px;
  cursor:pointer;
  border:2px solid #fff;
  border-radius:6px;
  background:transparent;
  color:#fff;
}

button:hover{background:rgba(255,255,255,.15)}

#hint{
  margin-top:14px;
  color:#fff;
  font-size:15px;
  display:none;
  opacity:.9;
}

#result{
  margin-top:20px;
  line-height:1.6;
  color:#fff;
  text-shadow:0 2px 6px rgba(0,0,0,.6);
  display:none;
  background:transparent;
  border:none;
  box-shadow:none;
  text-align:left;
}

#actions{margin-top:12px;display:none}
</style>
</head>

<body>

<img src="logo.png" id="logo">
<em>Firman-Nya lah pelita bagi ku setiap hari</em>

<input type="text" id="name" placeholder="Masukkan Nama Anda"><br>
<button id="startBtn" onclick="startProcess(event)">Ambil Ayat</button>

<div id="result"></div>

<div id="actions">
  <button onclick="copyVerse()">Salin Ayat</button>
  <button onclick="shareAsImage()">Bagikan Ayat</button>
</div>

<div id="hint">Tap Layar Untuk Memilih Ayat</div>

<canvas id="canvas" width="1080" height="1920" style="display:none"></canvas>

<script>
const verses=[
{ref:"Mazmur 23:1",text:"Tuhan adalah gembalaku, takkan kekurangan aku."},
{ref:"Yesaya 41:10",text:"Jangan takut, sebab Aku menyertai engkau."},
{ref:"Yeremia 29:11",text:"Aku mengetahui rancangan-rancangan damai sejahtera."},
{ref:"Matius 11:28",text:"Marilah kepada-Ku semua yang letih lesu."},
{ref:"Yohanes 14:27",text:"Damai sejahtera Kutinggalkan bagimu."},
{ref:"Roma 8:28",text:"Kita tahu bahwa Allah turut bekerja dalam segala sesuatu untuk mendatangkan kebaikan bagi mereka yang mengasihi Dia."},
{ref:"Filipi 4:13",text:"Segala perkara dapat kutanggung oleh Dia yang memberi kekuatan kepadaku."}
];

let shuffleInterval=null;
let tapEnabled=false;
let lastText="", lastName="";

function startProcess(e){
  e.stopPropagation();
  const n=document.getElementById("name").value.trim();
  if(!n)return;

  lastName=n;
  const r=document.getElementById("result");
  r.style.display="block";

  document.getElementById("hint").style.display="block";
  document.getElementById("actions").style.display="none";
  document.getElementById("startBtn").style.display="none";
  tapEnabled=true;

  clearInterval(shuffleInterval);
  shuffleInterval=setInterval(()=>{
    const v=verses[Math.floor(Math.random()*verses.length)];
    r.innerHTML=`<strong>${v.ref}</strong><br><br>${v.text}`;
  },80);
}

document.body.addEventListener("click",()=>{
  if(!tapEnabled)return;

  tapEnabled=false;
  clearInterval(shuffleInterval);
  document.getElementById("hint").style.display="none";
  document.getElementById("actions").style.display="block";

  const v=verses[Math.floor(Math.random()*verses.length)];
  lastText=v.ref+"\n\n"+v.text;
  document.getElementById("result").innerHTML=`<strong>${v.ref}</strong><br><br>${v.text}`;
});

function copyVerse(){
  navigator.clipboard.writeText(lastText);
}

function shareAsImage(){
  const canvas=document.getElementById("canvas");
  const ctx=canvas.getContext("2d");

  const bg=new Image();
  bg.src="background.jpeg";

  const logoImg=new Image();
  logoImg.src="logo.png";

  bg.onload=()=>{
    ctx.drawImage(bg,0,0,1080,1920);

    logoImg.onload=()=>{
      const logoSize=180;
      const logoX=(1080-logoSize)/2;
      const logoY=420;
      ctx.drawImage(logoImg,logoX,logoY,logoSize,logoSize);

      ctx.fillStyle="#fff";
      ctx.textAlign="left";
      ctx.shadowColor="rgba(0,0,0,.6)";
      ctx.shadowBlur=6;

      ctx.font="bold 40px Arial";
      ctx.fillText(lastName,120,680);

      ctx.font="48px Arial";
      wrapText(ctx,lastText,120,760,840,64);

      canvas.toBlob(blob=>{
        const file=new File([blob],"ayat.png",{type:"image/png"});
        navigator.share
          ? navigator.share({files:[file]})
          : download(blob);
      });
    };
  };
}

function download(blob){
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="ayat.png";
  a.click();
}

function wrapText(ctx,text,x,y,maxWidth,lineHeight){
  const words=text.split(" ");
  let line="";
  for(let i=0;i<words.length;i++){
    const testLine=line+words[i]+" ";
    if(ctx.measureText(testLine).width>maxWidth){
      ctx.fillText(line,x,y);
      line=words[i]+" ";
      y+=lineHeight;
    }else{
      line=testLine;
    }
  }
  ctx.fillText(line,x,y);
}
</script>

</body>
</html>
