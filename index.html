<script>
// ===============================
// REFERENSI LAI (INDONESIA)
// ===============================
const referencesLAI = [
  "Mazmur 23:1","Yesaya 41:10","Yosua 1:9","Roma 8:28","Filipi 4:6",
  "Matius 11:28","Amsal 3:5","Mazmur 46:1","Ibrani 11:1","Yohanes 14:27",
  "Mazmur 37:5","2 Korintus 5:7","Galatia 6:9","Mazmur 121:1","Yesaya 40:31",
  "Roma 15:13","Mazmur 34:19","1 Petrus 5:7","Yohanes 16:33","Mazmur 55:22"
  // (boleh kamu tambah sampai 200–300 referensi LAI)
];

// ===============================
// MAP NAMA KITAB LAI → ENGLISH
// (supaya API KJV tetap jalan)
// ===============================
const bookMap = {
  "Mazmur": "Psalm",
  "Yesaya": "Isaiah",
  "Yosua": "Joshua",
  "Roma": "Romans",
  "Filipi": "Philippians",
  "Matius": "Matthew",
  "Amsal": "Proverbs",
  "Ibrani": "Hebrews",
  "Yohanes": "John",
  "Korintus": "Corinthians",
  "Galatia": "Galatians",
  "Petrus": "Peter"
};

// hash nama + tanggal (beda tiap hari)
function hashValue(str) {
  return str.split("").reduce((a, b) => a + b.charCodeAt(0), 0);
}

// ubah referensi LAI → format API (English)
function convertToAPI(ref) {
  let parts = ref.split(" ");
  let book = parts[0];
  let rest = parts.slice(1).join(" ");

  // dukung kitab 1 / 2
  if (!isNaN(book)) {
    const num = book;
    const name = parts[1];
    rest = parts.slice(2).join(" ");
    return num + " " + (bookMap[name] || name) + " " + rest;
  }

  return (bookMap[book] || book) + " " + rest;
}

function getVerse() {
  const name = document.getElementById("name").value.trim();
  if (!name) return;

  const today = new Date().toISOString().slice(0,10);
  const index = hashValue(name + today) % referencesLAI.length;
  const refLAI = referencesLAI[index];
  const refAPI = convertToAPI(refLAI);

  fetch("https://bible-api.com/" + encodeURIComponent(refAPI))
    .then(res => res.json())
    .then(data => {
      document.getElementById("result").innerHTML =
        "<strong>Ayat untuk Hari Ini</strong><br><br>" +
        refLAI + "<br><br>" +
        data.text;
    })
    .catch(() => {
      document.getElementById("result").innerText =
        "Gagal memuat ayat. Silakan coba lagi.";
    });
}
</script>
